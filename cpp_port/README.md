# Íslenska C++ Library

This is a C++ port of the BinPackage Python library, providing access to the Database of Icelandic Morphology (BÍN).

## Features

- **Fast word lookup** - Uses memory-mapped files and trie-based search
- **Compound word analysis** - Automatically handles Icelandic compound words
- **Full morphological data** - Access to lemmas, word classes, inflection forms and tags
- **Cross-platform** - Works on Windows, macOS, and Linux
- **Minimal dependencies** - Standard C++17, no external libraries required

## Building

### Prerequisites

- C++17 compatible compiler (GCC 7+, Clang 5+, MSVC 2017+)
- CMake 3.14 or higher
- The BÍN data files from the Python package

### Build Instructions

```bash
mkdir build
cd build
cmake ..
make
```

To build with tests:
```bash
cmake -DBUILD_TESTS=ON ..
make
```

### Installation

```bash
sudo make install
```

This installs:
- Headers to `/usr/local/include/`
- Library to `/usr/local/lib/`
- CMake config to `/usr/local/lib/cmake/islenska/`

## Usage

### Basic Example

```cpp
#include <islenska.h>
#include <iostream>

int main() {
    islenska::Bin bin;
    
    // Look up a word
    auto [search_key, results] = bin.lookup("hestur");
    
    for (const auto& entry : results) {
        std::cout << "Lemma: " << entry.ord << std::endl;
        std::cout << "Category: " << entry.ofl << std::endl;
        std::cout << "Form: " << entry.bmynd << std::endl;
        std::cout << "Tag: " << entry.mark << std::endl;
    }
    
    return 0;
}
```

### CMake Integration

In your `CMakeLists.txt`:

```cmake
find_package(islenska REQUIRED)
target_link_libraries(your_target islenska::islenska)
```

### API Reference

#### Main Classes

**`islenska::Bin`** - Main database interface
- `lookup(word)` - Look up word forms
- `lookup_ksnid(word)` - Get extended morphological data
- `lookup_id(bin_id)` - Look up by BÍN ID number
- `lookup_cats(word)` - Get possible word categories
- `lookup_lemmas_and_cats(word)` - Get lemmas and categories
- `lookup_variants(word, cat, inflection)` - Get grammatical variants

**`islenska::BinEntry`** - Basic word entry
- `ord` - Lemma (headword)
- `bin_id` - Unique identifier
- `ofl` - Word class (kk, kvk, hk, lo, so, etc.)
- `hluti` - Domain (alm, ism, örn, etc.)
- `bmynd` - Inflectional form
- `mark` - Grammatical tag

**`islenska::Ksnid`** - Extended entry with additional attributes
- All BinEntry fields plus:
- `einkunn` - Correctness grade (1-5)
- `malsnid` - Register/genre
- `malfraedi` - Grammatical notes
- `millivisun` - Cross-reference ID
- And more...

## Data Files

The library expects the following files in `src/islenska/resources/`:
- `compressed.bin` - Main compressed dictionary
- `ordalisti-prefixes.dawg.bin` - Prefix dictionary for compounds
- `ordalisti-suffixes.dawg.bin` - Suffix dictionary for compounds

These files are generated by the Python build tools and should be copied from the Python package.

## Performance

The C++ library offers significant performance improvements over Python:
- **~10x faster** word lookups due to direct memory access
- **Minimal memory overhead** - data is memory-mapped, not loaded
- **Thread-safe** - multiple threads can perform lookups simultaneously

## Limitations

This C++ port implements the core runtime functionality only:
- No data generation/compression tools (use Python version)
- No configuration file parsing (data is pre-built)
- Limited to basic API (some convenience methods not yet ported)

## License

MIT License - Copyright © 2024 Miðeind ehf.

The BÍN data is under CC BY-SA 4.0 license from The Árni Magnússon Institute for Icelandic Studies.